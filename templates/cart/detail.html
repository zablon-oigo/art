{% extends 'base.html' %}

{% block title %}
Your Shopping Cart
{% endblock %}
{% block content %}
<h2 class=" text-3xl">Your Shopping Cart</h2>
<table class="border-collapse border-1 border-gray-600">
    <thead>
        <tr class="bg-blue-500 text-white text-lg text-center">
            <th>Image</th>
            <th>Product</th>
            <th>Quantity</th>
            <th>Remove</th>
            <th>Unit Price</th>
            <th>Price</th>
        </tr>
    </thead>
    <tbody>
        
            {% for item in cart %}
            {% with product=item.product %}
            <tr>
                <td>
                    <a href="{{product.get_absolute_url}}" class="">
                        <img src="{{product.image.url}}" alt="" class="h-20 w-20 rounde-xl">
                    </a>
                </td>
                <td>
                    {{product.name}}
                </td>
                <td>
                    <form action="{% url 'cart:cart_add' product.id %}" method="post">
                        {{item.update_quantity_form.quantity }}
                        {{item.update_quantity_form.override }}
                        <input type="submit" value="update">
                        {% csrf_token %}
                    </form>
                </td>
                <td>
                   <form action="{% url 'cart:cart_remove' product.id %}" method="post">
                    <input type="submit" value="Remove" class="">
                    {% csrf_token %}
                   </form> 
                </td>
                <td>$ {{item.price}}</td>
                <td>$ {{item.total_price}}</td>
            </tr>
            {% endwith %}
            {% endfor %}
        <tr>
            <td>Total</td>
            <td colspan="4"></td>
            <td>$ {{cart.get_total_price}}</td>
        </tr>
    </tbody>
</table>
<div class="">
    <a href="{% url 'product:product_list' %}" class="">Continue Shopping</a>
    <a href="{% url 'orders:order_create' %}" class="">Checkout</a>
</div>

{% endblock %}